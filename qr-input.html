<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<title>QR Input Data Kapal SIMPAN</title>

<script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
  margin: 0;
  padding: 0;
  background: #f2f2f2;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: Arial, Helvetica, sans-serif;
}

/* AREA STIKER */
#sticker {
  width: 8cm;
  height: 10cm;
  background: white;
  border: 3px solid black;
  margin-top: 30px;
  position: relative;
  text-align: center;
  padding: 12px;
  box-sizing: border-box;
  overflow: hidden;
}

/* watermark */
#sticker::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url("logo-simpan.png") repeat;
  background-size: 120px;
  opacity: 0.06;
  z-index: 0;
}

.content {
  position: relative;
  z-index: 2;
}

/* logo atas */
.logo {
  width: 80px;
  margin-bottom: 8px;
}

/* QR */
#qr {
  display: inline-block;
  margin: 10px 0 6px 0;
}

/* teks bawah */
.title {
  font-weight: 800;
  font-size: 16px;
  margin-top: 4px;
}

.subtitle {
  font-weight: bold;
  font-size: 12px;
  margin-top: 2px;
  margin-bottom: 6px;
}

/* tombol */
.buttons {
  margin: 25px 0;
}
button {
  padding: 8px 16px;
  margin: 4px;
  font-size: 14px;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="sticker">
  <div class="content">

    <!-- LOGO PEMDA -->
    <img src="logo-bateng.png" class="logo" />

    <!-- QR -->
    <div id="qr"></div>

    <!-- TEXT -->
    <div class="title">SIMPAN</div>
    <div class="subtitle">Sistem Informasi Manajemen Pendataan Armada Nelayan</div>

  </div>
</div>

<div class="buttons">
  <button onclick="downloadPNG()">Download PNG</button>
  <button onclick="downloadJPG()">Download JPG</button>
  <button onclick="downloadPDF()">Download PDF</button>
</div>

<script>
const url = "https://docs.google.com/forms/d/e/1FAIpQLScj55Oq0RiC8LkzTCO0HwzNGGNBTmeJVPKNO0Z1S3V9J29Wtw/viewform";

new QRCode(document.getElementById("qr"), {
  text: url,
  width: 250,
  height: 250,
  correctLevel: QRCode.CorrectLevel.H
});

function downloadPNG() {
  html2canvas(document.getElementById("sticker")).then(canvas => {
    const link = document.createElement("a");
    link.download = "qr-input-simpan.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
  });
}

function downloadJPG() {
  html2canvas(document.getElementById("sticker")).then(canvas => {
    const link = document.createElement("a");
    link.download = "qr-input-simpan.jpg";
    link.href = canvas.toDataURL("image/jpeg", 0.95);
    link.click();
  });
}

function downloadPDF() {
  html2canvas(document.getElementById("sticker")).then(canvas => {
    const imgData = canvas.toDataURL("image/png");
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF("p", "cm", [10, 8]);
    pdf.addImage(imgData, "PNG", 0, 0, 8, 10);
    pdf.save("qr-input-simpan.pdf");
  });
}
</script>

</body>
</html>
