<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>QR Input Data Kapal SIMPAN</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
  margin: 0;
  padding: 0;
  background: #f2f2f2;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: Arial, sans-serif;
}

/* === STIKER 8 x 12 CM === */
#sticker {
  width: 8cm;
  height: 12cm;
  background: white;
  border: 3px solid black;
  margin-top: 30px;
  position: relative;
  text-align: center;
  padding: 10px 10px 14px 10px;
  box-sizing: border-box;
  overflow: hidden;
}

/* watermark SIMPAN */
#sticker::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url("logo-simpan.png") repeat;
  background-size: 110px;
  opacity: 0.05;
  z-index: 0;
}

.content {
  position: relative;
  z-index: 2;
}

.logo {
  width: 70px;
  margin-bottom: 6px;
}

#qr {
  margin: 6px auto 6px auto;
  width: 220px;
  height: 220px;
}

.title {
  font-weight: 900;
  font-size: 17px;
  margin-top: 6px;
}

.subtitle {
  font-weight: bold;
  font-size: 11px;
  line-height: 1.25;
  margin-top: 4px;
  padding: 0 6px;
}

/* tombol */
.buttons {
  margin: 25px;
  display: flex;
  gap: 10px;
}

button {
  padding: 10px 16px;
  font-size: 14px;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="sticker">
  <div class="content">
    <img src="logo-bateng.png" class="logo">

    <div id="qr"></div>

    <div class="title">SIMPAN</div>
    <div class="subtitle">
      Sistem Informasi Manajemen Pendataan Armada Nelayan
    </div>
  </div>
</div>

<div class="buttons">
  <button onclick="downloadPNG()">Download PNG</button>
  <button onclick="downloadJPG()">Download JPG</button>
  <button onclick="downloadPDF()">Download PDF</button>
</div>

<script>
/* ==========================
   QR PERMANEN (FORM INPUT)
========================== */
const url = "https://docs.google.com/forms/d/e/1FAIpQLScj55Oq0RiC8LkzTCO0HwzNGGNBTmeJVPKNO0Z1S3V9J29Wtw/viewform";

new QRCode(document.getElementById("qr"), {
  text: url,
  width: 220,
  height: 220,
  correctLevel: QRCode.CorrectLevel.H
});

/* ==========================
   DOWNLOAD
========================== */
function downloadPNG() {
  html2canvas(document.getElementById("sticker"), {scale: 3}).then(canvas => {
    const link = document.createElement("a");
    link.download = "qr-input-simpan-8x12.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
  });
}

function downloadJPG() {
  html2canvas(document.getElementById("sticker"), {scale: 3}).then(canvas => {
    const link = document.createElement("a");
    link.download = "qr-input-simpan-8x12.jpg";
    link.href = canvas.toDataURL("image/jpeg", 1.0);
    link.click();
  });
}

async function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF({
    orientation: "portrait",
    unit: "cm",
    format: [8, 12]
  });

  const canvas = await html2canvas(document.getElementById("sticker"), {scale: 3});
  const imgData = canvas.toDataURL("image/png");

  pdf.addImage(imgData, "PNG", 0, 0, 8, 12);
  pdf.save("qr-input-simpan-8x12.pdf");
}
</script>

</body>
</html>
