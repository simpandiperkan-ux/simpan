<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Data Kapal SIMPAN</title>
<style>
body{font-family:Arial;background:#f4f6f8;padding:20px}
.box{max-width:700px;margin:auto;background:#fff;padding:20px;border-radius:10px}
hr{margin:15px 0}
</style>
</head>
<body>

<div class="box">
<h2>ðŸ“„ Data Kapal SIMPAN</h2>
<div id="hasil">Memuat data...</div>
</div>

<script>
const urlCSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSBI5O8DJD_-VoI2Bf3NDHY_x1eFO8vQgrmpw7L1VW_HczX9avlE5HVX2yN16nRQ8gq_UD0xp_wWfvk/pub?gid=972225342&single=true&output=csv";

const params = new URLSearchParams(window.location.search);
const idCari = params.get("id");

fetch(urlCSV)
.then(r => r.text())
.then(text => {
  const rows = text.trim().split("\n").map(r => r.split(","));
  const header = rows[0];
  const data = rows.slice(1);

  const idxID = header.indexOf("ID SIMPAN");
  const idxStatus = header.indexOf("STATUS VERIFIKASI");
  const idxTglVerif = header.indexOf("TANGGAL VERIFIKASI");
  const idxLink = header.indexOf("LINK HALAMAN KAPAL");
  const idxUpdate = header.indexOf("TANGGAL UPDATE TERAKHIR");

  const row = data.find(r => r[idxID] === idCari);

  if(!row){
    document.getElementById("hasil").innerHTML = "<b>Data tidak ditemukan</b>";
    return;
  }

  document.getElementById("hasil").innerHTML = `
    <p><b>ID SIMPAN:</b> ${row[idxID]}</p>
    <p><b>Status:</b> ${row[idxStatus]}</p>
    <p><b>Tanggal Verifikasi:</b> ${row[idxTglVerif]}</p>
    <p><b>Update Terakhir:</b> ${row[idxUpdate]}</p>
    <p><b>Link Halaman:</b> <a href="${row[idxLink]}" target="_blank">${row[idxLink]}</a></p>
  `;
});
</script>

</body>
</html>
