<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Data Kapal SIMPAN</title>
<style>
body{
  font-family:Arial;
  background:#f4f6f8;
  padding:20px;
}
.box{
  max-width:700px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
}
.label{font-weight:bold}
hr{margin:15px 0}
</style>
</head>
<body>

<div class="box">
  <h2>üìÑ Data Kapal SIMPAN</h2>
  <div id="hasil">Memuat data...</div>
</div>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSBI5O8DJD_-VoI2Bf3NDHY_x1eFO8vQgrmpw7L1VW_HczX9avlE5HVX2yN16nRQ8gq_UD0xp_wWfvk/pub?gid=55347590&single=true&output=csv";

const urlParams = new URLSearchParams(window.location.search);
const idCari = urlParams.get("id");

fetch(CSV_URL)
.then(res => res.text())
.then(csv => {

  const rows = csv.split("\n").map(r => r.split(","));
  const header = rows[0];
  const data = rows.slice(1);

  const col = nama => header.indexOf(nama);

  const iID = col("ID SIMPAN");
  const iStatus = col("STATUS VERIFIKASI");
  const iTglVerif = col("TANGGAL VERIFIKASI");
  const iLink = col("LINK HALAMAN KAPAL");
  const iUpdate = col("UPDATE TERAKHIR");
  const iQR = col("LINK QR");
  const iNama = col("Nama Kapal");
  const iDesa = col("Desa");
  const iKec = col("Kecamatan");

  let ditemukan = false;
  let html = "";

  data.forEach(r => {
    if (r[iID] === idCari) {
      ditemukan = true;
      html = `
        <p><span class="label">ID SIMPAN:</span> ${r[iID]}</p>
        <p><span class="label">Nama Kapal:</span> ${r[iNama]}</p>
        <p><span class="label">Desa:</span> ${r[iDesa]}</p>
        <p><span class="label">Kecamatan:</span> ${r[iKec]}</p>
        <hr>
        <p><span class="label">Status Verifikasi:</span> ${r[iStatus]}</p>
        <p><span class="label">Tanggal Verifikasi:</span> ${r[iTglVerif]}</p>
        <p><span class="label">Update Terakhir:</span> ${r[iUpdate]}</p>
        <p><span class="label">Link Halaman:</span> 
          <a href="${r[iLink]}" target="_blank">Buka</a>
        </p>
        <p><span class="label">QR:</span><br>
          <img src="${r[iQR]}" width="150">
        </p>
      `;
    }
  });

  document.getElementById("hasil").innerHTML = 
    ditemukan ? html : "‚ùå Data tidak ditemukan";

});
</script>

</body>
</html>
