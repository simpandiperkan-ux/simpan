<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>SIMPAN â€“ Identitas Kapal Nelayan</title>
<style>
body{font-family:Arial;background:#f4f6f8;padding:20px}
.card{background:#fff;padding:20px;border-radius:10px;margin-bottom:20px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
h2{margin-top:0}
img{max-width:100%;border-radius:6px;margin:6px 0}
.label{font-weight:bold}
</style>
</head>
<body>

<h2>ðŸ“‹ Data Kapal SIMPAN</h2>
<div id="data">Memuat data...</div>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSBI5O8DJD_-VoI2Bf3NDHY_x1eFO8vQgrmpw7L1VW_HczX9avlE5HVX2yN16nRQ8gq_UD0xp_wWfvk/pub?gid=972225342&single=true&output=csv";

// ambil parameter id (opsional)
const params = new URLSearchParams(window.location.search);
const idCari = params.get("id");

// ubah link drive ke link gambar
function driveImg(url){
  if(!url) return "";
  const m = url.match(/id=([^&]+)/);
  if(!m) return "";
  return "https://drive.google.com/uc?export=view&id="+m[1];
}

fetch(CSV_URL)
.then(r=>r.text())
.then(t=>{
  const rows = t.split("\n").map(r=>r.split(","));
  const h = rows[0];
  const d = rows.slice(1);

  const col = n => h.indexOf(n);
  let html = "";

  d.forEach(r=>{
    if(!r[col("ID SIMPAN")]) return;
    if(idCari && r[col("ID SIMPAN")]!==idCari) return;

    html += `
    <div class="card">
      <p><span class="label">ID SIMPAN:</span> ${r[col("ID SIMPAN")]}</p>
      <p><span class="label">Nama Kapal:</span> ${r[col("Nama Kapal")]}</p>
      <p><span class="label">Desa:</span> ${r[col("Desa")]}</p>
      <p><span class="label">Kecamatan:</span> ${r[col("Kecamatan")]}</p>
      <p><span class="label">Status:</span> ${r[col("STATUS VERIFIKASI")]}</p>

      <hr>

      <p class="label">Foto KTP:</p>
      <img src="${driveImg(r[col("Upload Foto KTP Elektronik")])}">

      <p class="label">Foto Kapal:</p>
      <img src="${driveImg(r[col("Foto Kapal Tampak Depan")])}">
      <img src="${driveImg(r[col("Foto Kapal Tampak Samping Kiri")])}">
      <img src="${driveImg(r[col("Foto Kapal Tampak Samping Kanan")])}">
      <img src="${driveImg(r[col("Foto Kapal Tampak Belakang")])}">

      <p class="label">Foto Mesin:</p>
      <img src="${driveImg(r[col("Foto Mesin")])}">

      <p class="label">Foto Alat Tangkap:</p>
      <img src="${driveImg(r[col("Foto Alat Tangkap Utama")])}">
    </div>
    `;
  });

  document.getElementById("data").innerHTML = html || "Data tidak ditemukan";
});
</script>

</body>
</html>
